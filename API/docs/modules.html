<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Modules - PMO API Documentation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <i class="fas fa-project-diagram"></i>
                <span>PMO API</span>
            </div>
            <ul class="nav-links">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="screener-api.html" class="nav-link">Screener API</a></li>
                <li><a href="projects-api.html" class="nav-link">Projects API</a></li>
                <li><a href="resources-api.html" class="nav-link">Resources API</a></li>
                <li><a href="allocations-api.html" class="nav-link">Allocations API</a></li>
                <li><a href="managers-api.html" class="nav-link">Managers API</a></li>
                <li><a href="business-lines-api.html" class="nav-link">Business Lines API</a></li>
                <li><a href="utility-apis.html" class="nav-link">Utility APIs</a></li>
                <li><a href="#modules" class="nav-link active">Modules</a></li>
            </ul>
            <button class="nav-toggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <div class="sidebar">
        <div class="sidebar-content">
            <div class="sidebar-section">
                <h4>API Modules</h4>
                <ul>
                    <li><a href="#business-lines">Business Lines</a></li>
                    <li><a href="#managers">Managers</a></li>
                    <li><a href="#resource-allocation">Resource Allocation</a></li>
                    <li><a href="#resource-roles">Resource Roles</a></li>
                    <li><a href="#resource-timeoff">Resource Time Off</a></li>
                </ul>
            </div>
            <div class="sidebar-section">
                <h4>Database & Utils</h4>
                <ul>
                    <li><a href="#database-utils">Database Utilities</a></li>
                    <li><a href="#excel-import">Excel Import</a></li>
                    <li><a href="#general-utils">General Utilities</a></li>
                </ul>
            </div>
            <div class="sidebar-section">
                <h4>Testing & Debug</h4>
                <ul>
                    <li><a href="#test-files">Test Files</a></li>
                    <li><a href="#debug-tools">Debug Tools</a></li>
                </ul>
            </div>
        </div>
    </div>

    <main class="main-content">
        <div class="container">
            <!-- Hero Section -->
            <section class="hero">
                <div class="hero-content">
                    <h1>API Modules Documentation</h1>
                    <p>Detailed documentation for all PMO API modules, utilities, and supporting components</p>
                </div>
            </section>

            <!-- Business Lines Module -->
            <section id="business-lines" class="section">
                <div class="section-header">
                    <h2><i class="fas fa-building"></i> Business Lines Module</h2>
                    <p>Manage organizational business lines and their hierarchical structure</p>
                </div>

                <div class="api-group">
                    <div class="api-group-header">
                        <h3 class="api-group-title">Business Lines Endpoints</h3>
                    </div>

                    <div class="endpoint">
                        <div class="endpoint-header">
                            <div class="method-path">
                                <span class="method get">GET</span>
                                <span class="path">/business_lines</span>
                            </div>
                            <div class="endpoint-summary">Retrieve all business lines</div>
                        </div>
                        <div class="endpoint-content">
                            <div class="description">
                                <p>Fetches all business lines with their hierarchical relationships and metadata.</p>
                            </div>
                            
                            <div class="example">
                                <h4>PowerShell Example</h4>
                                <div class="code-container">
                                    <button class="copy-btn">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                    <pre><code class="language-powershell">Invoke-WebRequest -Uri "http://localhost:5000/business_lines" -Method GET | ConvertFrom-Json</code></pre>
                                </div>
                            </div>

                            <div class="response-example">
                                <h4>Response Example</h4>
                                <div class="code-container">
                                    <button class="copy-btn">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                    <pre><code class="language-json">[
  {
    "id": 1,
    "name": "Technology",
    "parent_id": null,
    "level": 1,
    "created_date": "2024-01-01"
  },
  {
    "id": 2,
    "name": "Software Development",
    "parent_id": 1,
    "level": 2,
    "created_date": "2024-01-01"
  }
]</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Managers Module -->
            <section id="managers" class="section">
                <div class="section-header">
                    <h2><i class="fas fa-users-cog"></i> Managers Module</h2>
                    <p>Manage organizational hierarchy and manager-employee relationships</p>
                </div>

                <div class="api-group">
                    <div class="endpoint">
                        <div class="endpoint-header">
                            <div class="method-path">
                                <span class="method get">GET</span>
                                <span class="path">/managers</span>
                            </div>
                            <div class="endpoint-summary">Retrieve all managers</div>
                        </div>
                        <div class="endpoint-content">
                            <div class="description">
                                <p>Fetches all managers with their reporting structure and team information.</p>
                            </div>
                            
                            <div class="example">
                                <h4>PowerShell Example</h4>
                                <div class="code-container">
                                    <button class="copy-btn">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                    <pre><code class="language-powershell">Invoke-WebRequest -Uri "http://localhost:5000/managers" -Method GET | ConvertFrom-Json</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="endpoint">
                        <div class="endpoint-header">
                            <div class="method-path">
                                <span class="method get">GET</span>
                                <span class="path">/managers/{manager_id}/reports</span>
                            </div>
                            <div class="endpoint-summary">Get direct reports for a manager</div>
                        </div>
                        <div class="endpoint-content">
                            <div class="description">
                                <p>Retrieves all direct reports for a specific manager.</p>
                            </div>
                            
                            <div class="parameters">
                                <h4>Path Parameters</h4>
                                <table class="params-table">
                                    <thead>
                                        <tr>
                                            <th>Parameter</th>
                                            <th>Type</th>
                                            <th>Description</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><code>manager_id</code></td>
                                            <td>integer</td>
                                            <td>Unique identifier for the manager</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Resource Allocation Module -->
            <section id="resource-allocation" class="section">
                <div class="section-header">
                    <h2><i class="fas fa-chart-pie"></i> Resource Allocation Module</h2>
                    <p>Track and manage resource allocation across projects and time periods</p>
                </div>

                <div class="api-group">
                    <div class="endpoint">
                        <div class="endpoint-header">
                            <div class="method-path">
                                <span class="method get">GET</span>
                                <span class="path">/resource_allocation</span>
                            </div>
                            <div class="endpoint-summary">Retrieve resource allocations</div>
                        </div>
                        <div class="endpoint-content">
                            <div class="description">
                                <p>Fetches resource allocation data with filtering and pagination support.</p>
                            </div>
                            
                            <div class="parameters">
                                <h4>Query Parameters</h4>
                                <table class="params-table">
                                    <thead>
                                        <tr>
                                            <th>Parameter</th>
                                            <th>Type</th>
                                            <th>Description</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><code>start_date</code></td>
                                            <td>date</td>
                                            <td>Filter allocations from this date (YYYY-MM-DD)</td>
                                        </tr>
                                        <tr>
                                            <td><code>end_date</code></td>
                                            <td>date</td>
                                            <td>Filter allocations to this date (YYYY-MM-DD)</td>
                                        </tr>
                                        <tr>
                                            <td><code>resource_id</code></td>
                                            <td>integer</td>
                                            <td>Filter by specific resource</td>
                                        </tr>
                                        <tr>
                                            <td><code>project_id</code></td>
                                            <td>integer</td>
                                            <td>Filter by specific project</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="endpoint">
                        <div class="endpoint-header">
                            <div class="method-path">
                                <span class="method post">POST</span>
                                <span class="path">/resource_allocation</span>
                            </div>
                            <div class="endpoint-summary">Create new resource allocation</div>
                        </div>
                        <div class="endpoint-content">
                            <div class="description">
                                <p>Creates a new resource allocation entry.</p>
                            </div>
                            
                            <div class="example">
                                <h4>PowerShell Example</h4>
                                <div class="code-container">
                                    <button class="copy-btn">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                    <pre><code class="language-powershell">$body = @{
    resource_id = 101
    project_id = 202
    allocation_percentage = 50
    start_date = "2024-01-01"
    end_date = "2024-12-31"
} | ConvertTo-Json

Invoke-WebRequest -Uri "http://localhost:5000/resource_allocation" -Method POST -Body $body -ContentType "application/json"</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Database Utilities -->
            <section id="database-utils" class="section">
                <div class="section-header">
                    <h2><i class="fas fa-database"></i> Database Utilities</h2>
                    <p>Core database connection and utility functions</p>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-plug"></i> Database Connection Files</h3>
                    </div>
                    <div class="card-content">
                        <div class="file-list">
                            <div class="file-item">
                                <div class="file-info">
                                    <h4><code>db_utils_pg.py</code></h4>
                                    <p>PostgreSQL database connection utilities with connection pooling and async support</p>
                                </div>
                                <div class="file-features">
                                    <span class="feature-tag">Connection Pooling</span>
                                    <span class="feature-tag">Async Support</span>
                                    <span class="feature-tag">Error Handling</span>
                                </div>
                            </div>
                            
                            <div class="file-item">
                                <div class="file-info">
                                    <h4><code>db_utils_mysql.py</code></h4>
                                    <p>MySQL database connection utilities (legacy support)</p>
                                </div>
                                <div class="file-features">
                                    <span class="feature-tag">Legacy Support</span>
                                    <span class="feature-tag">MySQL</span>
                                </div>
                            </div>
                            
                            <div class="file-item">
                                <div class="file-info">
                                    <h4><code>db_utils.py</code></h4>
                                    <p>Generic database utilities and helper functions</p>
                                </div>
                                <div class="file-features">
                                    <span class="feature-tag">Generic Utils</span>
                                    <span class="feature-tag">Helper Functions</span>
                                </div>
                            </div>
                        </div>

                        <div class="code-example">
                            <h4>Database Connection Example</h4>
                            <div class="code-container">
                                <button class="copy-btn">
                                    <i class="fas fa-copy"></i>
                                </button>
                                <pre><code class="language-python">from db_utils_pg import get_db_connection

async def get_data():
    async with get_db_connection() as conn:
        cursor = await conn.cursor()
        await cursor.execute("SELECT * FROM resources")
        results = await cursor.fetchall()
        return results</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Excel Import Module -->
            <section id="excel-import" class="section">
                <div class="section-header">
                    <h2><i class="fas fa-file-excel"></i> Excel Import Module</h2>
                    <p>Bulk data import from Excel files with configuration support</p>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-upload"></i> Excel to Database Import</h3>
                    </div>
                    <div class="card-content">
                        <div class="file-list">
                            <div class="file-item">
                                <div class="file-info">
                                    <h4><code>excel_to_db.py</code></h4>
                                    <p>Main Excel import functionality with data validation and transformation</p>
                                </div>
                                <div class="file-features">
                                    <span class="feature-tag">Excel Processing</span>
                                    <span class="feature-tag">Data Validation</span>
                                    <span class="feature-tag">Batch Import</span>
                                </div>
                            </div>
                            
                            <div class="file-item">
                                <div class="file-info">
                                    <h4><code>excel_to_db.conf</code></h4>
                                    <p>Configuration file for Excel import mapping and validation rules</p>
                                </div>
                                <div class="file-features">
                                    <span class="feature-tag">Column Mapping</span>
                                    <span class="feature-tag">Validation Rules</span>
                                </div>
                            </div>
                        </div>

                        <div class="usage-example">
                            <h4>Usage Example</h4>
                            <div class="code-container">
                                <button class="copy-btn">
                                    <i class="fas fa-copy"></i>
                                </button>
                                <pre><code class="language-bash"># Run Excel import
python excel_to_db.py --file resources.xlsx --table resources --config excel_to_db.conf</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Testing & Debug Tools -->
            <section id="test-files" class="section">
                <div class="section-header">
                    <h2><i class="fas fa-bug"></i> Testing & Debug Tools</h2>
                    <p>Development tools for testing and debugging the API</p>
                </div>

                <div class="grid grid-2">
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-vial"></i> Test Files</h3>
                        </div>
                        <div class="card-content">
                            <div class="file-list">
                                <div class="file-item">
                                    <div class="file-info">
                                        <h4><code>api_test.py</code></h4>
                                        <p>API endpoint testing suite</p>
                                    </div>
                                </div>
                                
                                <div class="file-item">
                                    <div class="file-info">
                                        <h4><code>test_block_aggregation.py</code></h4>
                                        <p>Resource allocation aggregation tests</p>
                                    </div>
                                </div>
                                
                                <div class="file-item">
                                    <div class="file-info">
                                        <h4><code>mysql-connection-test.py</code></h4>
                                        <p>Database connectivity testing</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-search"></i> Debug Tools</h3>
                        </div>
                        <div class="card-content">
                            <div class="file-list">
                                <div class="file-item">
                                    <div class="file-info">
                                        <h4><code>debug_individual_resource.py</code></h4>
                                        <p>Individual resource debugging</p>
                                    </div>
                                </div>
                                
                                <div class="file-item">
                                    <div class="file-info">
                                        <h4><code>debug_portfolio.py</code></h4>
                                        <p>Portfolio-level debugging tools</p>
                                    </div>
                                </div>
                                
                                <div class="file-item">
                                    <div class="file-info">
                                        <h4><code>debug_resources.py</code></h4>
                                        <p>Resource management debugging</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- General Utilities -->
            <section id="general-utils" class="section">
                <div class="section-header">
                    <h2><i class="fas fa-tools"></i> General Utilities</h2>
                    <p>Helper functions and common utilities used across the API</p>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-cogs"></i> Utility Functions</h3>
                    </div>
                    <div class="card-content">
                        <div class="file-item">
                            <div class="file-info">
                                <h4><code>utils.py</code></h4>
                                <p>Common utility functions for data processing, validation, and formatting</p>
                            </div>
                            <div class="file-features">
                                <span class="feature-tag">Data Processing</span>
                                <span class="feature-tag">Validation</span>
                                <span class="feature-tag">Formatting</span>
                                <span class="feature-tag">Helper Functions</span>
                            </div>
                        </div>

                        <div class="code-example">
                            <h4>Common Utility Functions</h4>
                            <div class="code-container">
                                <button class="copy-btn">
                                    <i class="fas fa-copy"></i>
                                </button>
                                <pre><code class="language-python"># Date formatting
from utils import format_date, validate_date_range

# Data validation
from utils import validate_allocation_percentage, sanitize_input

# Response formatting
from utils import format_api_response, paginate_results</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>PMO API</h3>
                    <p>Comprehensive project management office API for resource allocation and project tracking.</p>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="index.html">Main Documentation</a></li>
                        <li><a href="#modules">API Modules</a></li>
                        <li><a href="#database">Database Utils</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Resources</h4>
                    <ul>
                        <li><a href="#test-files">Testing Tools</a></li>
                        <li><a href="#debug-tools">Debug Tools</a></li>
                        <li><a href="#general-utils">Utilities</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 PMO API Documentation. Built with modern web technologies.</p>
            </div>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="assets/js/script.js"></script>
</body>
</html>